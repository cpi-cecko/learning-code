n = 9
s = [0 for x in range(n+1)]

iters = 0
memo = [[0] * (n+1)] * (n+1)

def exchange(d, i, j, r):
    global iters
    global s

    exch = [1.0 for x in range(i-1, j+1)]

    for k in range(j-1, i-1, -1):
        best = 1.0
        for l in range(k+1, j+1):
            iters = iters + 1
            if best < exch[l] * r[k][l]:
                best = exch[l] * r[k][l]
                s[l] = k

        exch[k] = best

    return d * exch[i]
        

def print_seq(s, j):
    if j == 0:
        return

    print str(j)
    nxt = s[j]
    print_seq(s, nxt)

#           1st   2nd   3rd   4th   5th   6th   7th   8th   9th
r = [[0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00], 
     [0.00, 1.00, 1.30, 1.50, 1.20, 1.30, 0.51, 0.20, 3.14, 1.10],  # 1st
     [0.00, 1.00, 1.00, 1.70, 2.05, 1.10, 2.14, 1.14, 0.44, 2.34],  # 2nd
     [0.00, 1.00, 1.00, 1.00, 1.10, 1.06, 2.07, 3.05, 0.12, 1.32],  # 3rd
     [0.00, 1.00, 1.00, 1.00, 1.00, 1.06, 1.07, 2.24, 1.12, 1.42],  # 4th
     [0.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.02, 2.24, 5.12, 1.12],  # 5th
     [0.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.05, 1.99, 3.14],  # 6th
     [0.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 2.02, 2.14],  # 7th
     [0.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.15],  # 8th
     [0.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00],] # 9th

print exchange(1, 1, 9, r)
print_seq(s, 9)
print "Iters: " + str(iters)
